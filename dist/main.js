(()=>{"use strict";function e(e,t){const n=t.day,c=t.date;let o=n.maxtemp_c,a=n.mintemp_c;const m=n.condition.text,s=n.condition.icon,d=document.getElementById("forecast-days"),r=document.createElement("div");r.className="forecast-card";const i=document.createElement("div"),l=document.createElement("img");i.className="weather-icon",l.src="http:"+s,l.alt="forecast",l.className="forecast",i.append(l);let u=new Date(c),p=u.toLocaleDateString("en-us",{weekday:"long"}),y=u.toLocaleDateString("en-us",{year:"numeric",month:"short",day:"numeric"});const g=document.createElement("div");g.append(p);const f=document.createElement("div");f.append(y);const h=document.createElement("div");let E,v;h.append(m),e?(o=n.maxtemp_f,a=n.mintemp_f,E="H: "+o+"°F",v="L: "+a+"°F"):(o=n.maxtemp_c,a=n.mintemp_c,E="H: "+o+"°C",v="L: "+a+"°C");const x=document.createElement("div");x.append(E);const L=document.createElement("div");L.append(v),r.append(i,g,f,h,x,L),d.append(r)}async function t(t){const c=document.getElementById("error");try{(await fetch("https://api.weatherapi.com/v1/forecast.json?key=2efa87e3c68c4dfba8d05608230609&q="+t+"&days=3",{mode:"cors"})).json().then((function(t){c.style.display="none";let o=t.location.name;n.setLocation=o,console.log("here");let a=n.getTemp,m=t.forecast.forecastday;!function(e){const t=document.querySelector(".forecast-container");t.textContent="";const n=document.createElement("div");n.className="forecast-header",n.textContent="Forecast For "+e;const c=document.createElement("div");c.className="forecast-days",c.id="forecast-days",t.append(n,c)}(o);for(let t of m)e(a,t);!function(e,t){let n=t.location,c=t.current;const o=c.condition.icon,a=n.name,m=n.country,s=c.condition.text;let d;const r=c.last_updated,i=document.querySelector(".current-weather");i.textContent="";const l=document.createElement("img");l.src="http:"+o,l.alt="today",l.className="forecast";const u=document.createElement("div");u.textContent="Current Weather For "+a+", "+m,u.className="current-header";const p=document.createElement("div");p.textContent=s,p.className="weather-today";const y=document.createElement("div");e?(d=c.temp_f,y.textContent=d+"°F"):(d=c.temp_c,y.textContent=d+"°C"),y.className="temp-today";const g=document.createElement("div");let f=new Date(r),h=f.toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric",time:"long"}),E=f.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});g.textContent="Updated: "+h+" "+E,g.className="updated",i.append(l,u,p,y,g)}(a,t)})).catch((()=>{c.style.display="block"}))}catch(e){console.log(e)}}let n={loc:"auto:ip",temp:!1,get getLocation(){return this.loc},set setLocation(e){this.loc=e},get getTemp(){return this.temp},set setTemp(e){this.temp=e}};t(n.getLocation),document.getElementById("temp-toggle").addEventListener("change",(e=>{let c=e.target.checked,o=n.getLocation;c?(n.setTemp=!0,t(o)):(n.setTemp=!1,t(o))})),document.getElementById("location-form").addEventListener("submit",(e=>{e.preventDefault(),t(document.getElementById("location-input").value)}))})();