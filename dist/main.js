(()=>{"use strict";function e(e,t){const n=t.day,c=t.date;let o=n.maxtemp_c,a=n.mintemp_c;const s=n.condition.text,m=n.condition.icon,d=document.getElementById("forecast-days"),i=document.createElement("div");i.className="forecast-card";const r=document.createElement("div"),l=document.createElement("img");r.className="weather-icon",l.src="http:"+m,l.alt="forecast",l.className="forecast",r.append(l);let p=new Date(c),u=p.toLocaleDateString("en-us",{weekday:"long"}),y=p.toLocaleDateString("en-us",{year:"numeric",month:"short",day:"numeric"});const f=document.createElement("div");f.append(u);const g=document.createElement("div");g.append(y);const h=document.createElement("div");let E,v;h.append(s),e?(o=n.maxtemp_f,a=n.mintemp_f,E="H: "+o+"°F",v="L: "+a+"°F"):(o=n.maxtemp_c,a=n.mintemp_c,E="H: "+o+"°C",v="L: "+a+"°C");const x=document.createElement("div");x.append(E);const L=document.createElement("div");L.append(v),i.append(r,f,g,h,x,L),d.append(i)}let t={loc:"auto:ip",temp:!1,get getLocation(){return this.loc},set setLocation(e){this.loc=e},get getTemp(){return this.temp},set setTemp(e){this.temp=e}};async function n(n){const c=document.getElementById("error");try{(await fetch("https://api.weatherapi.com/v1/forecast.json?key=2efa87e3c68c4dfba8d05608230609&q="+n+"&days=3",{mode:"cors"})).json().then((function(n){c.style.display="none";let o=n.location.name;t.setLocation=o;let a=t.getTemp,s=n.forecast.forecastday;!function(e){const t=document.querySelector(".forecast-container");t.textContent="";const n=document.createElement("div");n.className="forecast-header",n.textContent="Forecast For "+e;const c=document.createElement("div");c.className="forecast-days",c.id="forecast-days",t.append(n,c)}(o);for(let t of s)e(a,t);!function(e,t){let n=t.location,c=t.current;const o=c.condition.icon,a=n.name,s=n.country,m=c.condition.text;let d;const i=c.last_updated,r=document.querySelector(".current-weather");r.textContent="";const l=document.createElement("img");l.src="http:"+o,l.alt="today",l.className="forecast";const p=document.createElement("div");p.textContent="Current Weather For "+a+", "+s,p.className="current-header";const u=document.createElement("div");u.textContent=m,u.className="weather-today";const y=document.createElement("div");e?(d=c.temp_f,y.textContent=d+"°F"):(d=c.temp_c,y.textContent=d+"°C"),y.className="temp-today";const f=document.createElement("div");let g=new Date(i),h=g.toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric",time:"long"}),E=g.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});f.textContent="Updated: "+h+" "+E,f.className="updated",r.append(l,p,u,y,f)}(a,n)})).catch((()=>{c.style.display="block"}))}catch(e){console.log(e)}}!async function(){try{(await fetch("https://api.ipgeolocation.io/ipgeo?apiKey=0a81d4bae2394f488927c9894cdf29e9",{mode:"cors"})).json().then((function(e){n(e.city)})).catch((()=>{n(t.getLocation)}))}catch(e){console.log(e)}}(),document.getElementById("temp-toggle").addEventListener("change",(e=>{let c=e.target.checked,o=t.getLocation;c?(t.setTemp=!0,n(o)):(t.setTemp=!1,n(o))})),document.getElementById("location-form").addEventListener("submit",(e=>{e.preventDefault(),n(document.getElementById("location-input").value)}))})();